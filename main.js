(()=>{"use strict";function e(e,t,n){var o=document.querySelector("#card-template").content.querySelector(".places__item").cloneNode(!0),r=o.querySelector(".card__image");r.src=e.link.href,r.alt=e.name,r.addEventListener("click",(function(){n(e.link.href,e.name)})),o.querySelector(".card__title").textContent=e.name,o.querySelector(".card__delete-button").addEventListener("click",(function(){!function(e){e.remove()}(o)}));var u=o.querySelector(".card__like-button");return u.addEventListener("click",(function(){t(u)})),o}function t(e){e.classList.toggle("card__like-button_is-active")}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){e&&"object"===n(e)?document.querySelectorAll(e.formSelector).forEach((function(t){t.addEventListener("submit",(function(n){n.preventDefault(),function(e,t){var n=e.querySelectorAll(t.inputSelector),o=!0;n.forEach((function(e){r(e,t),e.validity.valid||(o=!1)}));var u=e.querySelector(t.submitButtonSelector);o?u.removeAttribute("disabled"):u.setAttribute("disabled","disabled")}(t,e)})),t.addEventListener("input",(function(n){r(n.target,e),function(e,t){var n=e.querySelectorAll(t.inputSelector),o=!0;n.forEach((function(e){e.validity.valid||(o=!1)}));var r=e.querySelector(t.submitButtonSelector);o?r.removeAttribute("disabled"):r.setAttribute("disabled","disabled")}(t,e)}))})):console.error("Invalid settings object")}function r(e,t){var n=e.nextElementSibling;e.validity.valid?(n.textContent="",n.classList.remove(t.inputErrorClass)):(n.textContent=e.validationMessage,n.classList.add(t.inputErrorClass))}function u(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",p)}function c(e){e.querySelectorAll(".popup__input-error").forEach((function(e){e.textContent="",e.classList.remove("popup__input-error_active")})),e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",p)}function p(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&c(t)}}var i=[{name:"Архыз",link:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg")},{name:"Челябинская область",link:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg")},{name:"Иваново",link:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg")},{name:"Камчатка",link:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg")},{name:"Холмогорский район",link:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg")},{name:"Байкал",link:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg")}],l=document.querySelector(".popup__input_type_name"),a=document.querySelector(".popup__input_type_description"),d=document.querySelector(".profile__title"),s=document.querySelector(".profile__description"),_=d.textContent,f=s.textContent,m=document.querySelector(".popup_type_image"),y=m.querySelector(".popup__image"),v=m.querySelector(".popup__caption"),S=document.querySelector(".places__list"),b=document.querySelector(".popup_type_edit"),q=document.querySelector(".profile__edit-button"),k=b.querySelector(".popup__close"),E=document.querySelector(".popup_type_new-card"),L=document.querySelector(".profile__add-button"),h=E.querySelector(".popup__close"),g=document.forms.edit_profile,x=document.forms.new_place,w=document.querySelector(".popup__input_type_card-name"),C=document.querySelector(".popup__input_type_url"),A=document.querySelector(".profile__image");function j(e){S.prepend(e)}function R(n){j(e(n,t,D))}function U(e){e.preventDefault();var t=l.value,n=a.value;d.textContent=t,s.textContent=n,c(b)}function B(n){n.preventDefault();var o=w.value,r=C.value;j(e({name:o,link:new URL(r)},t,D)),x.reset(),c(E)}function D(e,t){!function(e,t){y.src=e,y.alt=t,v.textContent=t,u(m)}(e,t)}document.addEventListener("DOMContentLoaded",(function(){o({formSelector:".popup_type_edit .popup__form",inputSelector:".popup_type_edit .popup__input",submitButtonSelector:".popup_type_edit .popup__button",inputErrorClass:"popup__input-error_active",popup__input_type_error:"popup__input_type_error"}),o({formSelector:".popup_type_new-card .popup__form",inputSelector:".popup_type_new-card .popup__input",submitButtonSelector:".popup_type_new-card .popup__button",inputErrorClass:"popup__input-error_active"}),A.addEventListener("click",(function(){u(document.querySelector(".popup_type_new-avatar"))})),q.addEventListener("click",(function(){u(b),l.value=_,a.value=f})),k.addEventListener("click",(function(){return c(b)})),L.addEventListener("click",(function(){return u(E)})),h.addEventListener("click",(function(){return c(E)})),g.addEventListener("submit",U),x.addEventListener("submit",B),document.querySelectorAll(".popup").forEach((function(e){var t=document.querySelectorAll('[data-modal-target="'.concat(e.id,'"]')),n=e.querySelectorAll(".popup__close");t.forEach((function(t){t.addEventListener("click",(function(){return u(e)}))})),n.forEach((function(t){t.addEventListener("click",(function(){return c(e)}))})),e.addEventListener("click",(function(t){t.target===e&&c(e)}))})),i.forEach(R)}))})();